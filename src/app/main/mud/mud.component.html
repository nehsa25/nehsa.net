<div class="mud-dark">
    <mat-card class="card">
        <div class="commentgrid">
            <div
                [ngClass]="{'mudgrid-fullscreen': isFullscreen, 'mudgrid-expanded': panelExpanded === true, 'mudgrid-collapsed' : panelExpanded === false }">
                <div id="title">
                    <mat-expansion-panel disabled="true" [expanded]="panelExpanded" hideToggle
                        [ngClass]="{'title-panel-expanded': panelExpanded === true, 'title-panel-collapsed' : panelExpanded === false }">
                        <mat-expansion-panel-header>
                            <mat-panel-title> <span class="mud-title">NehsaMUD</span>
                                <span class="mud-subtitle">a rouge-like, text-based MUD</span>
                            </mat-panel-title>
                            <mat-panel-description>
                                <div class="panel-description-grid">
                                    <div>&nbsp;
                                    </div>
                                    <div>
                                        <mat-icon class="title-btns" (click)="fullscreen()">fullscreen</mat-icon>
                                        <mat-icon class="title-btns" (click)="expandPanel()">keyboard_arrow_down</mat-icon>
                                    </div>
                                </div>
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <div class="mud-sub-title-actions-grid">
                            <div><span *ngIf="world_name != ''">Welcome to
                                    {{world_name}}!
                                </span></div>
                            <div><img class="minimap" [src]="this.miniMap" /></div>
                        </div>
                    </mat-expansion-panel>
                </div>
                <div #scrollMe [scrollTop]="scrollMe.scrollHeight" id="main" [innerHTML]="mudEvents"
                    (click)="refocus(sendcommandarea)">
                </div>
                <div id="status">
                    <div class="statusgrid">
                        <table class="tiny5-regular">
                            <tr>
                                <td>Name</td>
                                <td colspan="2" id="playername">{{this.userService.name}}</td>
                            </tr>
                            <tr>
                                <td>Health</td>
                                <td colspan="2" id="health"><span [innerHTML]="health"></span></td>
                            </tr>
                            <tr>
                                <td>Statuses</td>
                                <td style="width: 50%;">Resting</td>
                                <td style="width: 50%;"><span [innerHTML]="playerBoolean(this.resting)"></span></td>
                            </tr>
                            <tr>
                                <td id="inv" colspan="3">Inventory<br>
                                    <div id="inventory">
                                        <ul class="condensed">
                                            <li *ngFor="let item of inventory" [innerHtml]="item"></li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>actions</td>
                                <td colspan="2">
                                    <button class="action" [class.map-selected]="mapSelected" [class.map-deselected]="!mapSelected" *ngIf="this.mapImageAvailable === true"
                                        (click)="launchMap()"><mat-icon [class.map-selected]="mapSelected" [class.map-deselected]="!mapSelected">map</mat-icon></button>

                                    <button class="action" [class.rest-selected]="restSelected" [class.rest-deselected]="!restSelected"  *ngIf="this.mapImageAvailable === true"
                                        (click)="startRest()"><mat-icon [class.rest-selected]="restSelected" [class.rest-deselected]="!restSelected" >favorite</mat-icon></button>

                                    <button class="action" [class.help-selected]="helpSelected" [class.help-deselected]="!helpSelected"  *ngIf="this.mapImageAvailable === true"
                                        (click)="getHelp()"><mat-icon [class.help-selected]="helpSelected" [class.help-deselected]="!helpSelected" >help</mat-icon></button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="helpsection"><span class="important">A text-based multi-user dungeon. HUZZAH!</span>
                </div>
                <div id="command">
                    <input type="text" class="command-input" #sendcommandarea (keydown)="sendKeyCommand($event)"
                        [(ngModel)]="command"
                        placeholder="Type a command here and press &lt;ENTER&gt;.  (e.g. /say Hi!&lt;ENTER&gt; to say hello)" />
                </div>
                <div id="aiimage">
                    <div *ngIf="this.roomImageName !=''">
                        <button class="aiimage-btn" *ngIf="this.roomImageAvailable === true"
                            (click)="launchImage()"><img class="aiimage" [src]="this.roomImageName"></button>
                    </div>
                </div>
                <div id="usersconnected">{{usersConnected}} users online.</div>
            </div>
        </div>
        <div><app-comment></app-comment></div>
    </mat-card>
</div>