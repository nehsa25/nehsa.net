<div>
    <mat-card class="card">
        <mat-card-header>
            <mat-card-title>
                <h1 data-testid="header-title">TLS</h1>
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="topics">tls
                <div>
                    <dl>
                        <dt>pem</dt>
                        <dd>Privacy Enhanced Mail (PEM) files are a type of Public Key Infrastructure (PKI) file used
                            for keys and certificates</dd>
                        <dt>pfx</dt>
                        <dd>
                            pfx files to securely store private keys, associated public key certificates, and
                            intermediate certificates, forming a chain. They are typically password protected.<br>
                            <div class="code">openssl pkcs12 -inkey private.key -in ca_bundle.crt -export -out out.pfx &lt;supersecretpassword&gt;</div>
                        </dd>
                        <dt>ca_bundle.crt</dt>
                        <dd>
                            Root and intermediate certificates
                        </dd>
                        <dt>certificate.crt</dt>
                        <dd>The certificate from your provider.  <span class="important">I typically paste the ca_bundle.crt at the top of this file so I have one combined-complete chain file.</span></dd>
                        <dt>private.key</dt>
                        <dd>The secret portion of the public/private key relationship.</dd>
                    </dl>
                </div>
                <div>
                    <h2>Windows</h2>
                    <div>
                        <h3>Setup SSL for Docker Container</h3>
                        <ol>
                            <li>Create SSL cert</li>
                            <li>Download certificate package. In my case, it was a zip containing:
                                <ul class="condensed">
                                    <li>ca_bundle.crt</li>
                                    <li>certificate.crt</li>
                                    <li>private.key</li>
                                </ul>
                            </li>
                            <li>Convert the CRT to a pfx
                                <ol class="condensed">
                                    <li>Install Cygwin
                                        <ul>
                                            <li>Ensure to install OpenSSL package</li>
                                        </ul>
                                    </li>
                                    <li>Open Cygwin Terminal (Cygwin64 Terminal)</li>
                                    <li>Drop unzipped CRTs into HOME: (C:\cygwin64\home\&lt;YOU&gt;)</li>
                                    <li>Within Cygwin Terminal,
                                        <ul>
                                            <li>
                                                <div class="code">openssl pkcs12 -export -out api.nehsa.net.pfx -inkey
                                                    private.key -in certificate.crt</div>
                                            </li>
                                            <li>Enter super secret password twice</li>

                                        </ul>
                                    </li>
                                    <li>Take api.nehsa.net.pfx and place it where it can be referened by Docker
                                        container (C:\certs)</li>
                                    <li>
                                        Launch container:
                                        <div class="code">
                                            docker run -it -p 22007:22007 -e ASPNETCORE_URLS="https://+:22007" -e
                                            ASPNETCORE_HTTPS_PORT=22007 -e
                                            ASPNETCORE_Kestrel__Certificates__Default__Password="&lt;password&gt;" -e
                                            ASPNETCORE_Kestrel__Certificates__Default__Path="/https/api.nehsa.net.pfx"
                                            -v C:\certs:/https/ nehsa/nehsaapi:latest
                                        </div>
                                    </li>

                                </ol>

                            </li>
                        </ol>
                    </div>
                    <br>
                    <div>
                        <ul>
                            <li>
                                <h3>Setup SSL for Windows IIS HTTPS</h3>
                                <ol>
                                    <li>Install cygwin</li>
                                    <li>Copy private.key (private key) and certificate.crt (origin certificate) into
                                        home directory (c:\crygwin\home\&lt;YOU&gt;)
                                        <ul>
                                            <li>PEM format
                                                e.g.
                                                <ul>
                                                    <dl>
                                                        <dt>certificate.crt</dt>
                                                        <dd>
                                                            <pre>
    -----BEGIN CERTIFICATE-----
    MIIEojCCA4qgAwIBAgIUWI6zm/SPEtGpBeoW/j1PEI3S9zMwDQYJKoZIhvcNAQEL
    BQAwgYsxCzAJBgNVBAYTAlVTMRkwFwYDVQQKExBDbG91ZEZsYXJlLCBJbmMuMTQw
    MgYDVQQLEytDbG91ZEZsYXJlIE9yaWdpbiBTU0wgQ2VydGlmaWNhdGUgQXV0aG9y
    aXR5MRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRMwEQYDVQQIEwpDYWxpZm9ybmlh
    MB4XDTI0MDYwNjE3MTUwMFoXDTM5MDYwMzE3MTUwMFowYjEZMBcGA1UEChMQQ2xv
    dWRGbGFyZSwgSW5jLjEdMBsGA1UECxMUQ2xvdWRGbGFyZSBPcmlnaW4gQ0ExJjAk
    BgNVBAMTHUNsb3VkRmxhcmUgT3JpZ2luIENlcnRpZmljYXRlMIIBIjANBgkqhkiG
    9w0BAQEFAAOCAQ8AMIIBCgKCAQEA38Xur14O53O2Pu8OFk+hDCBKKDuIrEl5+sJB
    cCLy+pvtzxx89PW2l/rOpEbn98/DDqZZp7iZDE0dABp/RFBB3/SISdTOm29Xtvr1
    znIIWBryC63GhJ6ZClKeG6taRrgEeZpSf2fnDzMXjcTzu77qansec+uA1Jtf2VX7
    /8g7NEdVV9tujqMlrN7xyztpujeahRZAc7yG+cFZJUTSXSrrySLfVMG+wP6UB7KQ
    qi1sD6Rr3L10YJcWECryOVU1cfjf1Zzu/ofm6hHt3b+0ouWlxHNgZBNQkUbkveUi
    ehYKxgqyadyZczyR8D0Pc1i8OLDxTJ7+++n2GezXdVIjm020GQIDAQABo4IBJDCC
    ASAwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcD
    YTAlBgNVHREEHjAcgg0qLnRlbmFzeXMuY29tggt0ZW5hc3lzLmNvbTA4BgNVHR8E
    MTAvMC2gK6AphidodHRwOi8vY3JsLmNsb3VkZmxhcmUuY29tL29yaWdpbl9jYS5j
    cmwwDQYJKoZIhvcNAQELBQADggEBAC0ViotIvphmgXFiB3zk6yDBHmR2uKM9kGwf
    Yycs4C7pAwYq+00Q012BhWIgCTK9pJLBAgpWr8l0WdNlmjLuqGcKfG0K0LVuabdv
    Gh9AxmycrABMe8HE1BWKzDOPKcUeLNj2ZJ0o/w0TzgFljXGQ9PkT8ZCfs1G0sbvt
    6ZqOB8kB+gY8aokhMNSSPAkDogtP385NNlfe9ilStOWM1M4GFg7hqj98uj3+NR0J
    QWkz0pk49sWcQwj5Vt3ndx1gmw5Sd/m7fhTPDiIVQC8klsiyuC6EDjKehbp6jm9W
    rcBQ6icxBmh8ci8gHWcB01r54fNIcwR7DzddcfSpIxVSnIX0mSg=
    -----END CERTIFICATE-----
                                                            </pre>
                                                        </dd>
                                                        <dt>private.key</dt>
                                                        <dd>
                                                            <pre>
    -----BEGIN PRIVATE KEY-----
    MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDfxe6vXg7nc7Y+
    7w4WT6EMIEooO4isSXn6wkFwIvL6m+3PHHz09baX+s6kRuf3z8MOplmnuJkMTR0A
    Gn9EUEHf9IhJ1M6bb1e2+vXOcghYGvILrcaEnpkKUp4bq1pGuAR5mlJ/Z+cPMxeN
    xPO7vupqex5z64DUm1/ZVfv/yDs0R1VX226OoyWs3vHLO2m6N5qFFkBzvIb5wVkl
    RNJdKuvJIt9Uwb7A/pQHspCqLWwPpGvcvXRglxYQKvI5VTVx+N/VnO7+h+bqEe3d
    v7Si5aXEc2BkE1CRRuS95SJ6FgrGCrJp3JlzPJHwPQ9zWLw4sPFMnv776fYZ7Nd1
    UiObTbQZAgMBAAECggEAZZ2r6G3lhbw5f7Wt53rMjsWg90klpNsO7czFy4bLYPtr
    D9iHc/OascQ+j0H1t8ZcdOwcnXnJ4lioOTJPJbXuXCVeuGxPUC1NHzYyZkfJOz0t
    Ohl1IyckJxhiXP1AlwmcWp42JU4JEpFoekP8TH8DU0xKhWhlzeYqrfaKY1pJbFC4
    lyI042J+5zfyxFgNZ7vnkmoNv+2Hf8znzi0/yRAvdfpyL3C0xG6zkJOvYOMQF/Q7
    JOKiG4/+r0MwIE5YPFCEfeGbcOJmO2W418/cqk1By29Zq85E7yy6p5TKIB9tDJLb
    i0JzeE5vKQaXYVOxstRUfwftsOlSnNYHBUulU1r9/6CMQipzLv5Lg7KXMnVRk+el
    OAQ7En/OqwKBgQDwzzuZ93fQEbxRGhP/lI0fQRoUmvU3/xQN9meYSSL4hOs6ibUt
    K/mlnHweI2IXgCpx2L7GKlTOqOXWkBsy5flYLqe7KWt5owWRGEwk03H09+2Z5Ko2
    Sjr0cYEr72G/sBG8Bjb+htzIhcWwtd203M9BHYQE2seOlSd3RYo5XiWRRwKBgCa7
    B9aYDdhHSsHmEPCBsv+2AzwJoJ+UaJkgbYDgPKSpoljDkOprHFo5wcyFYymnEN7I
    j6cBwlB+8M1sN+V1IjO0ujqTmw90UlAz5OYqPzeqzqhwVIpnXyJEzDUgWD6DB+UY
    MUlbqoNTqE+in+gyrACByMFGMvoS4mhd28vMdgAVAoGBAO+yyfGvV9RB3Q0hI359
    OmJm3uPzcmUS/AsdofcKDPAbyDaMsNgIDfpM1R3W0pLfpPOxX/7Lc4IblJd93tB0
    7VBtOfbRunhf7ojaHJl7djTHUxLXoFz7vFuK2DiDDa84XXXcORRM3Xq2LxwbjdnT
    sqhn7uEksfLuCMn2jqcJH/fM
    -----END PRIVATE KEY-----
                                                            </pre>
                                                        </dd>
                                                    </dl>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>openssl pkcs12 -inkey private.key -in certificate.crt -export -out out4.pfx -
                                        choose a password</li>
                                    <li>Go to IIS->Server Certificates ->import, import out4.pfx</li>
                                    <li>Right-click on website, edit binding, set https to use new cert.</li>
                                </ol>
                            </li>
                            <li>
                                <h3>Create pfx from pem/crt - needed for IIS HTTPS</h3>
                                <div class="code">
                                    <pre>
    mkdir c:\tmp
    $cert = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname tenasys.corp;
    $pwd = ConvertTo-SecureString -String '&lt;PASSWORD&gt;' -Force -AsPlainText;
    $path = 'Cert:\LocalMachine\My\' + $cert.thumbprint;
    Export-PfxCertificate -cert $path -FilePath c:\tmp\powershellcert.pfx -Password $pwd
                                </pre>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>